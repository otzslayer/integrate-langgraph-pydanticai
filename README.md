# Pydantic AI & LangGraph κΈ°λ° Text-to-SQL μ—μ΄μ „νΈ

## π€ Windows ν™κ²½μ„ μ„ν• Quick Start

μ΄ κ°€μ΄λ“λ” Windows ν™κ²½μ—μ„ ν”„λ΅μ νΈλ¥Ό ν΄λ΅ ν• ν›„ λ°”λ΅ μ‹¤ν–‰ν•  μ μλ„λ΅ ν•„μμ μΈ μ„¤μ • λ‹¨κ³„λ¥Ό μ•λ‚΄ν•©λ‹λ‹¤.

### μ‚¬μ „ μ¤€λΉ„
- **Docker Desktop for Windows**: [Docker Desktop](https://www.docker.com/products/docker-desktop/)μ΄ μ„¤μΉλμ–΄ μμ–΄μ•Ό ν•©λ‹λ‹¤.
- **Python 3.12 μ΄μƒ**: Pythonμ΄ μ„¤μΉλμ–΄ μκ³ , Pathμ— μ¶”κ°€λμ–΄ μμ–΄μ•Ό ν•©λ‹λ‹¤.

---

### 1. Dockerλ΅ PostgreSQL μ‹¤ν–‰ν•κΈ°

ν”„λ΅μ νΈλ” `docker-compose.yml` νμΌμ„ μ‚¬μ©ν•μ—¬ PostgreSQL λ°μ΄ν„°λ² μ΄μ¤λ¥Ό μ‹¤ν–‰ν•©λ‹λ‹¤.

1.  **PowerShell λλ” λ…λ Ή ν”„λ΅¬ν”„νΈ(CMD)λ¥Ό μ—½λ‹λ‹¤.**
2.  ν”„λ΅μ νΈμ λ£¨νΈ λ””λ ‰ν† λ¦¬μ—μ„ λ‹¤μ λ…λ Ήμ–΄λ¥Ό μ‹¤ν–‰ν•μ—¬ Docker μ»¨ν…μ΄λ„λ¥Ό λ°±κ·ΈλΌμ΄λ“μ—μ„ μ‹μ‘ν•©λ‹λ‹¤.

    ```bash
    docker-compose up -d
    ```
    μ΄ λ…λ Ήμ–΄λ” `text-to-sql-db`λΌλ” μ΄λ¦„μ PostgreSQL λ°μ΄ν„°λ² μ΄μ¤λ¥Ό μƒμ„±ν•κ³  μ‹¤ν–‰ν•©λ‹λ‹¤.

---

### 2. ν™κ²½ λ³€μ λ° μμ΅΄μ„± μ„¤μΉ

Python κ°€μƒ ν™κ²½μ„ μ„¤μ •ν•κ³  `uv`λ¥Ό μ‚¬μ©ν•μ—¬ ν•„μ”ν• λΌμ΄λΈλ¬λ¦¬λ¥Ό μ„¤μΉν•©λ‹λ‹¤.

1.  **`.env` νμΌ μƒμ„±**
    ν”„λ΅μ νΈ λ£¨νΈ λ””λ ‰ν† λ¦¬μ— `.env` νμΌμ„ μƒμ„±ν•κ³  μ•„λ λ‚΄μ©μ„ μ¶”κ°€ν•©λ‹λ‹¤. μ΄ νμΌμ€ λ°μ΄ν„°λ² μ΄μ¤ μ—°κ²° μ •λ³΄μ™€ OpenAI API ν‚¤λ¥Ό κ΄€λ¦¬ν•©λ‹λ‹¤.

    ```env
    # .env
    DATABASE_URL="postgresql+asyncpg://myuser:mypassword@localhost:5432/text2sql"
    OPENAI_API_KEY="sk-..."
    ```
    *`sk-...` λ¶€λ¶„μ— μμ‹ μ OpenAI API ν‚¤λ¥Ό μ…λ ¥ν•μ„Έμ”.*

2.  **`uv`λ΅ λΌμ΄λΈλ¬λ¦¬ μ„¤μΉ**
    `uv`λ” λΉ λ¥Έ Python ν¨ν‚¤μ§€ μ„¤μΉ λ„κµ¬μ…λ‹λ‹¤.

    ```bash
    # 1. uv μ„¤μΉ (μ•„μ§ μ„¤μΉν•μ§€ μ•μ€ κ²½μ°)
    pip install uv

    # 2. κ°€μƒ ν™κ²½ μƒμ„±
    uv venv

    # 3. κ°€μƒ ν™κ²½ ν™μ„±ν™”
    .venv\Scripts\activate

    # 4. pyproject.tomlμ— λ…μ‹λ λΌμ΄λΈλ¬λ¦¬ μ„¤μΉ
    uv sync
    ```

---

### 3. FastAPI μ„λ²„ μ‹¤ν–‰ λ° ν…μ¤νΈ

μ΄μ  FastAPI κ°λ° μ„λ²„λ¥Ό μ‹¤ν–‰ν•κ³  Swagger UIλ¥Ό ν†µν•΄ μ—μ΄μ „νΈλ¥Ό ν…μ¤νΈν•©λ‹λ‹¤.

1.  **FastAPI μ„λ²„ μ‹¤ν–‰**
    κ°€μƒ ν™κ²½μ΄ ν™μ„±ν™”λ ν„°λ―Έλ„μ—μ„ λ‹¤μ λ…λ Ήμ–΄λ¥Ό μ‹¤ν–‰ν•©λ‹λ‹¤.

    ```bash
    fastapi dev
    ```
    μ„λ²„κ°€ `http://127.0.0.1:8000`μ—μ„ μ‹¤ν–‰λ©λ‹λ‹¤.

2.  **Swagger UIλ΅ ν…μ¤νΈν•κΈ°**
    μ›Ή λΈλΌμ°μ €λ¥Ό μ—΄κ³  [http://127.0.0.1:8000/docs](http://127.0.0.1:8000/docs)λ΅ μ΄λ™ν•©λ‹λ‹¤.

    **a. λ°μ΄ν„°λ² μ΄μ¤ μ΄κΈ°ν™”**
    - `/admin/setup-db` μ—”λ“ν¬μΈνΈλ¥Ό μ°Ύμµλ‹λ‹¤.
    - `Try it out` λ²„νΌμ„ ν΄λ¦­ν•©λ‹λ‹¤.
    - `Execute` λ²„νΌμ„ λλ¬ λ°μ΄ν„°λ² μ΄μ¤ ν…μ΄λΈ”κ³Ό μ΄κΈ° λ°μ΄ν„°λ¥Ό μƒμ„±ν•©λ‹λ‹¤.
    - "Database setup complete." λ©”μ‹μ§€λ¥Ό ν™•μΈν•©λ‹λ‹¤.

    **b. μ—μ΄μ „νΈ ν…μ¤νΈ**
    - `/agent/invoke` μ—”λ“ν¬μΈνΈλ¥Ό μ°Ύμµλ‹λ‹¤.
    - `Try it out` λ²„νΌμ„ ν΄λ¦­ν•©λ‹λ‹¤.
    - **Request body**μ— ν…μ¤νΈν•  μ§λ¬Έμ„ JSON ν•μ‹μΌλ΅ μ…λ ¥ν•©λ‹λ‹¤.
      ```json
      {
        "question": "λ§μΌ€ν… λ¶€μ„ λ§¤λ‹μ €λ” λ„κµ¬μΈκ°€μ”?"
      }
      ```
    - `Execute` λ²„νΌμ„ λλ¬ μ—μ΄μ „νΈλ¥Ό μ‹¤ν–‰ν•©λ‹λ‹¤.
    - **Response body**μ—μ„ μ—μ΄μ „νΈμ λ‹µλ³€μ„ ν™•μΈν•©λ‹λ‹¤.
